<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Taxa de Adoção por Projeto — GenAI Bradesco</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-primary:#0c0e14;
      --bg-secondary:#151823;
      --bg-card:#1e2130;
      --bg-card-hover:#272936;
      --bradesco-red:#cc0000;
      --bradesco-blue:#0033A0;
      --accent-purple:#7B68EE;
      --accent-cyan:#00e5ff;
      --text-primary:#ffffff;
      --text-secondary:#a3a8c3;
      --card-shadow:0 10px 25px -5px rgba(0,0,0,.3);
      --mixed-gradient:linear-gradient(135deg,var(--bradesco-blue),var(--accent-purple),var(--bradesco-red));
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg-primary);
      color:var(--text-primary);
      line-height:1.55;
      padding:24px;
      background-image:
        radial-gradient(circle at 10% 20%,rgba(0,51,160,.15) 0, rgba(0,51,160,0) 70%),
        radial-gradient(circle at 90% 80%,rgba(204,0,0,.15) 0, rgba(204,0,0,0) 70%);
    }
    .container{max-width:1200px;margin:0 auto}
    .header{ text-align:center; margin-bottom:20px }
    .header h1{
      font-size:28px;font-weight:800;margin-bottom:6px;
      background:var(--mixed-gradient);-webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .header p{color:var(--text-secondary);font-size:15px}

    .back-button{
      position:fixed; top:20px; left:20px;
      width:50px; height:50px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      background:linear-gradient(135deg, var(--bradesco-blue), var(--accent-purple));
      color:#fff; text-decoration:none; box-shadow:var(--card-shadow);
      border:0; cursor:pointer; transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease;
      z-index:1000;
    }
    .back-button:hover{ transform:translateY(-3px); box-shadow:0 20px 40px rgba(0,0,0,.4); opacity:.95 }
    .back-button svg{ width:20px; height:20px; display:block }

    .card{
      background:var(--bg-card);
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      box-shadow:var(--card-shadow);
      padding:16px;
      transition:background .2s ease,border-color .2s ease;
    }
    .card:hover{ background:var(--bg-card-hover); border-color:rgba(255,255,255,.12) }

    /* === Barra de filtros (pesquisas) + legenda no topo === */
    .toolbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; flex-wrap:wrap; margin-bottom:12px
    }
    .filters{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
    .filter-label{font-size:13px;color:var(--text-secondary)}
    select{
      background:var(--bg-secondary);
      color:var(--text-primary);
      border:1px solid rgba(255,255,255,.12);
      border-radius:8px;
      padding:8px 10px;font-size:13px
    }

    /* Legenda agora no topo (à direita dos filtros) */
    .legend{
      display:flex; flex-wrap:wrap; gap:14px; align-items:center;
    }
    .legend .dot{
      width:12px;height:12px;border-radius:3px;margin-right:6px;display:inline-block
    }
    .legend span{font-size:12px;color:var(--text-secondary)}

    /* GRID: sem a coluna Wave */
    .grid-cols{
      grid-template-columns: 280px 220px 120px 120px 140px 220px;
      /* Projeto | barra adoção | Interações | Média | Usuários | Perfis Treinados */
    }

    .rows-wrap{display:flex;flex-direction:column;gap:10px}
    .row{
      display:grid;
      align-items:center;
      gap:12px;
      background:var(--bg-secondary);
      border:1px solid rgba(255,255,255,.06);
      border-radius:12px;
      padding:12px;
    }
    .row--header{
      background:transparent;
      border:1px dashed rgba(255,255,255,.12);
      position:sticky;
      top:0; z-index:2;
      backdrop-filter: blur(2px);
    }
    .row--header div{
      font-size:12px;
      font-weight:800;
      letter-spacing:.3px;
      text-transform:uppercase;
      color:var(--text-secondary);
      user-select:none;
      display:flex; align-items:center; gap:8px;
    }
    .th{ cursor:pointer; }
    .th .arrow{ font-size:10px; opacity:.8 }
    .th.active{ color:#fff }
    .th.active .arrow{ color:#fff }

    .name{
      font-weight:600;
      font-size:14px;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }

    .bar-wrap{
      position:relative;
      width:100%;
      height:12px;
      border-radius:8px;
      background:rgba(255,255,255,.10);
      overflow:hidden;
    }
    .bar{
      height:100%;
      border-radius:8px;
      width:0;
      transition:none;
    }
    .bar-label{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-weight:800;
      font-size:12px;
      line-height:1;
      padding:0 6px;
      border-radius:6px;
      white-space:nowrap;
      color:#000000;
      background:rgba(255,255,255,.90);
      text-shadow:none;
    }

    .k{ display:flex;flex-direction:column;align-items:center; gap:2px }
    .k .v{ font-weight:700; font-size:14px }
    .k .l{ font-size:10px; color:var(--text-secondary) }

    .profiles{
      font-size:12px; line-height:1.35; color:#fff; 
      display:flex; flex-wrap:wrap; gap:6px;
    }
    .tag{
      border:1px solid rgba(255,255,255,.15);
      background:rgba(255,255,255,.05);
      padding:2px 8px; border-radius:999px; font-weight:600; font-size:11px;
    }

    @media (max-width: 1100px){
      .grid-cols{ grid-template-columns: 240px 200px 110px 110px 130px 200px; }
    }
    @media (max-width: 920px){
      .row{ grid-template-columns: 1fr; align-items:start; }
      .row--header{ display:none } /* no mobile, usa o seletor */
      .bar-wrap{ height:10px }
      .k{ align-items:flex-start }
      .profiles{ gap:4px }
    }
  </style>
</head>
<body>

  <a class="back-button" href="https://marianacintra81.github.io/Bradesco-GEN-AI/Comparativo%20de%20Implantacoes.html" aria-label="Voltar">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M15.5 19a1 1 0 0 1-.7-.29l-6-6a1 1 0 0 1 0-1.42l6-6a1 1 0 1 1 1.4 1.42L10.91 12l5.29 5.29A1 1 0 0 1 15.5 19z" fill="currentColor"/>
    </svg>
  </a>

  <div class="container">
    <div class="header">
      <h1>Taxa de Adoção por Projeto</h1>
   
    </div>

    <div class="card" style="margin-bottom:14px;">
      <!-- TOP BAR: filtros + legenda -->
      <div class="toolbar">
        <div class="filters">
          <label class="filter-label">Ordenar por:</label>
          <select id="sortBy" aria-label="Ordenação">
            <option value="adoption" selected>Taxa de Adoção</option>
            <option value="interactions">Total de Interações</option>
            <option value="avg">Média de Interações</option>
            <option value="users">Número de Usuários</option>
            <option value="name">Projeto (A–Z)</option>
            <option value="profiles">Perfis Treinados</option>
          </select>

          <label class="filter-label" style="margin-left:8px;">Wave:</label>
          <select id="waveFilter" aria-label="Filtro por wave">
            <option value="all" selected>Todas</option>
            <option value="Piloto">Piloto</option>
            <option value="Wave 1">Wave 1</option>
            <option value="Wave 2">Wave 2</option>
            <option value="Wave 3">Wave 3</option>
            <option value="Wave 4">Wave 4</option>
          </select>
        </div>

        <!-- LEGENDA no topo -->
        <div class="legend" role="note" aria-label="Legenda de faixas de adoção">
          <div><span class="dot" style="background:#00e5ff"></span><span>100% de adoção</span></div>
          <div><span class="dot" style="background:#7B68EE"></span><span>90–99% de adoção</span></div>
          <div><span class="dot" style="background:#0033A0"></span><span>80–89% de adoção</span></div>
          <div><span class="dot" style="background:#cc0000"></span><span>&lt; 80% de adoção</span></div>
        </div>
      </div>

      <div class="rows-wrap">
        <!-- Cabeçalho fixo (sem coluna Wave) -->
        <div class="row row--header grid-cols" role="row">
          <div class="th" data-key="name" aria-sort="none">Projeto <span class="arrow"></span></div>
          <div class="th" data-key="adoption" aria-sort="descending">Taxa de Adoção <span class="arrow">▼</span></div>
          <div class="th" data-key="interactions" aria-sort="none">Interações <span class="arrow"></span></div>
          <div class="th" data-key="avg" aria-sort="none">Média <span class="arrow"></span></div>
          <div class="th" data-key="users" aria-sort="none">Usuários <span class="arrow"></span></div>
          <div class="th" data-key="profiles" aria-sort="none">Perfis Treinados <span class="arrow"></span></div>
        </div>

        <!-- Linhas dinâmicas -->
        <div id="rows"></div>
      </div>
    </div>
  </div>

  <script>
    // ==== DADOS ====
    const projects = [
      { name:'Plataforma de segurança Safer', totalUsers:36, activeUsers:36, adoptionRate:100, totalInteractions:2563, avgInteractions:71.2, wave:'Piloto', profiles:['QA','SRE'] },
      { name:'Reabilitação Financeira', totalUsers:44, activeUsers:42, adoptionRate:95.5, totalInteractions:1020, avgInteractions:23.2, wave:'Wave 3', profiles:['QA'] },
      { name:'BRAIN', totalUsers:27, activeUsers:26, adoptionRate:96.3, totalInteractions:955, avgInteractions:35.4, wave:'Wave 3', profiles:['QA'] },
      { name:'Plataforma A3C', totalUsers:16, activeUsers:14, adoptionRate:87.5, totalInteractions:822, avgInteractions:51.4, wave:'Wave 3', profiles:['QA'] },
      { name:'Contadoria', totalUsers:15, activeUsers:14, adoptionRate:93.3, totalInteractions:800, avgInteractions:53.3, wave:'Wave 3', profiles:['QA','Analista de Negócios'] },
      { name:'Open Finance', totalUsers:5, activeUsers:5, adoptionRate:100, totalInteractions:756, avgInteractions:151.2, wave:'Piloto', profiles:['QA'] },
      { name:'CRM', totalUsers:9, activeUsers:9, adoptionRate:100, totalInteractions:413, avgInteractions:45.9, wave:'Wave 2', profiles:['QA'] },
      { name:'Consignado', totalUsers:12, activeUsers:11, adoptionRate:91.7, totalInteractions:398, avgInteractions:33.2, wave:'Wave 3', profiles:['Scrum Master','QA'] },
      { name:'Massificado', totalUsers:9, activeUsers:9, adoptionRate:100, totalInteractions:325, avgInteractions:36.1, wave:'Wave 2', profiles:['QA'] },
      { name:'ATACADO', totalUsers:2, activeUsers:2, adoptionRate:100, totalInteractions:257, avgInteractions:128.5, wave:'Wave 3', profiles:['QA'] },
      { name:'Sala Core', totalUsers:8, activeUsers:8, adoptionRate:100, totalInteractions:251, avgInteractions:31.4, wave:'Wave 2', profiles:['QA'] },
      { name:'Abertura de Contas', totalUsers:8, activeUsers:8, adoptionRate:100, totalInteractions:233, avgInteractions:29.1, wave:'Wave 3', profiles:['QA'] },
      { name:'Soluçoes PJ', totalUsers:9, activeUsers:9, adoptionRate:100, totalInteractions:229, avgInteractions:25.4, wave:'Wave 3', profiles:['Scrum Master','QA'] },
      { name:'Transformação', totalUsers:7, activeUsers:7, adoptionRate:100, totalInteractions:228, avgInteractions:32.6, wave:'Wave 3', profiles:['QA'] },
      { name:'Bradesco Global Solutions', totalUsers:8, activeUsers:8, adoptionRate:100, totalInteractions:152, avgInteractions:19.0, wave:'Wave 3', profiles:['QA'] },
      { name:'Investimentos', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:154, avgInteractions:154.0, wave:'Piloto', profiles:['QA'] },
      { name:'Pessoa Fisica', totalUsers:10, activeUsers:8, adoptionRate:80, totalInteractions:145, avgInteractions:14.5, wave:'Wave 4', profiles:['Scrum Master','QA'] },
      { name:'CONSIGNADO - E-Social', totalUsers:10, activeUsers:9, adoptionRate:90, totalInteractions:124, avgInteractions:12.4, wave:'Wave 3', profiles:['QA'] },
      { name:'Cluster Soluções de Pagamento e Conciliação', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:118, avgInteractions:118.0, wave:'Wave 3', profiles:['Scrum Master'] },
      { name:'CONSIGNADO - Pleito de Priorização INSS', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:110, avgInteractions:110.0, wave:'Wave 3', profiles:['QA'] },
      { name:'BSPI', totalUsers:8, activeUsers:8, adoptionRate:100, totalInteractions:108, avgInteractions:13.5, wave:'Wave 3', profiles:['Scrum Master'] },
      { name:'PIX-CPF', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:92, avgInteractions:92.0, wave:'Wave 2', profiles:['QA'] },
      { name:'SCAP', totalUsers:3, activeUsers:3, adoptionRate:100, totalInteractions:63, avgInteractions:21.0, wave:'Wave 2', profiles:['QA'] },
      { name:'INTERNACIONAL E CÂMBIO', totalUsers:5, activeUsers:5, adoptionRate:100, totalInteractions:62, avgInteractions:12.4, wave:'Wave 3', profiles:['QA'] },
      { name:'A3C', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:59, avgInteractions:59.0, wave:'Wave 3', profiles:['QA'] },
      { name:'Plataforma Atendimento', totalUsers:6, activeUsers:4, adoptionRate:66.7, totalInteractions:51, avgInteractions:8.5, wave:'Wave 1', profiles:['QA'] },
      { name:'PROJETO PT-W50594', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:48, avgInteractions:48.0, wave:'Wave 3', profiles:['Scrum Master'] },
      { name:'PIX-CPJ', totalUsers:4, activeUsers:4, adoptionRate:100, totalInteractions:46, avgInteractions:11.5, wave:'Wave 2', profiles:['QA'] },
      { name:'CONSÓRCIO | Consorcio', totalUsers:5, activeUsers:5, adoptionRate:100, totalInteractions:41, avgInteractions:8.2, wave:'Wave 3', profiles:['QA'] },
      { name:'Site Gestor', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:30, avgInteractions:30.0, wave:'Wave 3', profiles:['Scrum Master'] },
      { name:'Plataforma Atendimento – outro', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:29, avgInteractions:29.0, wave:'Wave 3', profiles:['QA'] },
      { name:'Consignado - Portabilidade', totalUsers:3, activeUsers:3, adoptionRate:100, totalInteractions:28, avgInteractions:9.3, wave:'Wave 4', profiles:['Scrum Master'] },
      { name:'MBPF', totalUsers:4, activeUsers:2, adoptionRate:50, totalInteractions:25, avgInteractions:6.3, wave:'Wave 3', profiles:['DEV'] },
      { name:'PDPJ', totalUsers:2, activeUsers:2, adoptionRate:100, totalInteractions:25, avgInteractions:12.5, wave:'Wave 3', profiles:['DEV'] },
      { name:'Internet Banking', totalUsers:2, activeUsers:2, adoptionRate:100, totalInteractions:20, avgInteractions:10.0, wave:'Piloto', profiles:['QA'] },
      { name:'CONSIGNADO - Mktplace Consignado', totalUsers:3, activeUsers:3, adoptionRate:100, totalInteractions:19, avgInteractions:6.3, wave:'Wave 3', profiles:['QA'] },
      { name:'Tesouraria', totalUsers:3, activeUsers:3, adoptionRate:100, totalInteractions:18, avgInteractions:6.0, wave:'Wave 2', profiles:['QA'] },
      { name:'VATINTR', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:17, avgInteractions:17.0, wave:'Wave 3', profiles:['QA'] },
      { name:'Interestellar', totalUsers:2, activeUsers:2, adoptionRate:100, totalInteractions:10, avgInteractions:5.0, wave:'Wave 3', profiles:['QA'] },
      { name:'PEPF', totalUsers:2, activeUsers:1, adoptionRate:50, totalInteractions:6, avgInteractions:3.0, wave:'Wave 4', profiles:['QA'] },
      { name:'MBPJ', totalUsers:2, activeUsers:1, adoptionRate:50, totalInteractions:5, avgInteractions:2.5, wave:'Wave 4', profiles:['Scrum Master'] },
      { name:'Tribo Canais Assistidos', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:4, avgInteractions:4.0, wave:'Wave 3', profiles:['Scrum Master'] },
      { name:'SAFER', totalUsers:1, activeUsers:1, adoptionRate:100, totalInteractions:2, avgInteractions:2.0, wave:'Wave 3', profiles:['QA'] },
      { name:'Agora Trader', totalUsers:2, activeUsers:1, adoptionRate:50, totalInteractions:1, avgInteractions:0.5, wave:'Wave 4', profiles:['QA'] },
      { name:'AFLUENTES', totalUsers:1, activeUsers:0, adoptionRate:0, totalInteractions:0, avgInteractions:0, wave:'Wave 3', profiles:[] },
      { name:'Dozer', totalUsers:1, activeUsers:0, adoptionRate:0, totalInteractions:0, avgInteractions:0, wave:'Wave 3', profiles:[] }
    ];

    function colorByAdoption(rate){
      if (rate === 100) return '#00e5ff';
      if (rate >= 90) return '#7B68EE';
      if (rate >= 80) return '#0033A0';
      return '#cc0000';
    }
    function getProfilesText(p){
      if (Array.isArray(p.profiles) && p.profiles.length) return p.profiles.join(', ');
      return '-';
    }

    const rowsMountPoint = document.getElementById('rows');
    const sortBy = document.getElementById('sortBy');
    const waveFilter = document.getElementById('waveFilter');
    const ths = Array.from(document.querySelectorAll('.row--header .th'));

    let sortKey = 'adoption';
    let sortDir = 'desc';

    function compare(a,b,key){
      const dir = sortDir === 'asc' ? 1 : -1;
      switch(key){
        case 'name': return dir * a.name.localeCompare(b.name, 'pt-BR', {sensitivity:'base'});
        case 'adoption': return dir * (a.adoptionRate - b.adoptionRate);
        case 'interactions': return dir * (a.totalInteractions - b.totalInteractions);
        case 'avg': {
          const avA = Number.isFinite(a.avgInteractions) ? a.avgInteractions :
                      (a.totalInteractions/(a.totalUsers||1));
          const avB = Number.isFinite(b.avgInteractions) ? b.avgInteractions :
                      (b.totalInteractions/(b.totalUsers||1));
          return dir * (avA - avB);
        }
        case 'users': {
          if (a.totalUsers !== b.totalUsers) return dir * (a.totalUsers - b.totalUsers);
          return dir * (a.activeUsers - b.activeUsers);
        }
        case 'profiles': {
          const lenA = (a.profiles||[]).length;
          const lenB = (b.profiles||[]).length;
          if (lenA !== lenB) return dir * (lenA - lenB);
          return dir * a.name.localeCompare(b.name, 'pt-BR', {sensitivity:'base'});
        }
      }
      return 0;
    }

    function applyHeaderState(){
      ths.forEach(th=>{
        const key = th.dataset.key;
        th.classList.toggle('active', key === sortKey);
        const arrow = th.querySelector('.arrow');
        th.setAttribute('aria-sort', key===sortKey ? (sortDir==='asc'?'ascending':'descending') : 'none');
        arrow.textContent = key===sortKey ? (sortDir==='asc'?'▲':'▼') : '';
      });
    }

    function syncSelect(){
      const map = { adoption:'adoption', interactions:'interactions', avg:'avg', users:'users', name:'name', profiles:'profiles' };
      sortBy.value = map[sortKey] || 'adoption';
    }

    function render(){
      rowsMountPoint.innerHTML = '';
      const wave = waveFilter.value;
      let data = projects.slice();

      if (wave !== 'all') data = data.filter(p => p.wave === wave);
      data.sort((a,b)=> compare(a,b,sortKey));

      data.forEach(p=>{
        const row = document.createElement('div');
        row.className = 'row grid-cols';

        const name = document.createElement('div');
        name.className = 'name';
        name.title = p.name;
        name.textContent = p.name;

        const barWrap = document.createElement('div');
        barWrap.className = 'bar-wrap';
        const bar = document.createElement('div');
        bar.className = 'bar';
        const rate = Math.max(0, Math.min(100, Number(p.adoptionRate) || 0));
        bar.style.backgroundColor = colorByAdoption(rate);
        bar.style.width = rate + '%';

        const label = document.createElement('span');
        label.className = 'bar-label';
        label.textContent = rate % 1 === 0 ? `${rate.toFixed(0)}%` : `${rate.toFixed(1)}%`;

        barWrap.appendChild(bar);
        barWrap.appendChild(label);

        const kInter = document.createElement('div');
        kInter.className = 'k';
        kInter.innerHTML = `<div class="v">${(p.totalInteractions||0).toLocaleString('pt-BR')}</div><div class="l">Interações</div>`;

        const kAvg = document.createElement('div');
        kAvg.className = 'k';
        const avg = (p.avgInteractions!=null? p.avgInteractions : (p.totalInteractions/(p.totalUsers||1)));
        kAvg.innerHTML = `<div class="v">${Number(avg).toFixed(1)}</div><div class="l">Média</div>`;

        const kUsers = document.createElement('div');
        kUsers.className = 'k';
        kUsers.innerHTML = `<div class="v">${p.activeUsers}/${p.totalUsers}</div><div class="l">Usuários</div>`;

        const profilesBox = document.createElement('div');
        profilesBox.className = 'profiles';
        const list = getProfilesText(p).split(',').map(s => s.trim()).filter(Boolean);
        if (list.length === 0) {
          const t = document.createElement('span'); t.className = 'tag'; t.textContent = '-';
          profilesBox.appendChild(t);
        } else {
          list.forEach(labelTxt=>{
            const t = document.createElement('span');
            t.className = 'tag';
            t.textContent = labelTxt;
            profilesBox.appendChild(t);
          });
        }

        row.appendChild(name);
        row.appendChild(barWrap);
        row.appendChild(kInter);
        row.appendChild(kAvg);
        row.appendChild(kUsers);
        row.appendChild(profilesBox);

        rowsMountPoint.appendChild(row);
      });
    }

    // Inicialização
    let sortDirDefaults = { name:'asc', adoption:'desc', interactions:'desc', avg:'desc', users:'desc', profiles:'desc' };
    applyHeaderState();
    syncSelect();
    render();

    sortBy.addEventListener('change', ()=>{
      const value = sortBy.value;
      sortKey = value;
      sortDir = sortDirDefaults[value] || 'desc';
      applyHeaderState();
      render();
    });

    waveFilter.addEventListener('change', render);

    ths.forEach(th=>{
      th.addEventListener('click', ()=>{
        const key = th.dataset.key;
        if (sortKey === key){
          sortDir = (sortDir === 'asc') ? 'desc' : 'asc';
        } else {
          sortKey = key;
          sortDir = sortDirDefaults[key] || 'desc';
        }
        applyHeaderState();
        syncSelect();
        render();
      });
    });
  </script>
</body>
</html>
